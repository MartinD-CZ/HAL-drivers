# HAL drivers
A repository with drivers/libraries for various ICs I wrote. All of the drivers are C++ objects and their constructors take pointers to the various HAL peripheral handles - so the drivers are hardware independent as long as you use HAL.

Current drivers (more info in the top of the respective cpp file):
 - NRF24L01(+) *RF transceiver*
 - AT24Cxx *EEPROM*
 - WS2812(B) *RGB LED*
 - QMC5883(L) *magnetic field sensor*
 
## Using C++ in code generated by CubeMX
Even if you select "C++" during the project setup, the generated main file will be in C and it will also be a total mess with a ton of comments, functions etc.

The simplest workaround is to create a new cpp file with a function containing a `while(1)` loop. You then call this function just before entering the `while(1)` in the original `main.c` file.

Even cleaner approach is to select `do not generate main()` in `Project Manager->Project`. This will create the `main.c` file, but it will not contain the `int main()` function. So then you can create a cpp file with a function called `int main()` and this will behave like a classical `main()`, without all the garbage around it.

You will, however, need to call all the initialization functions (like `MX_GPIO_Init()`) manually from this new `main`. For that, I recommend that you uncheck `Visiblity (Static)` in `Project Manager->Advanced settings`. This will put declarations for all those `MX_x_Init()` functions into the `main.h` header, so you just include this in you new cpp file and call all the relevant functions.